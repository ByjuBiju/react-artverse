@model PaymentDetail.Models.EntityOrder

<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

<form method="post" asp-action="Payment" asp-controller="MyOrder" name="razorpayForm">
    <input type="hidden" id="razorpay_payment_id" name="razorpay_payment_id" />
    <input type="hidden" id="razorpay_order_id" name="razorpay_order_id" />
    <input type="hidden" id="razorpay_signature" name="razorpay_signature" />
</form>

<button id="rzp-button1">Pay with Razorpay</button>

<script>
    var options = {
        "key": "@ViewBag.key",  // 🔥 VERY IMPORTANT
        "amount": "@(Model.Amount * 100)",
        "currency": "INR",
        "name": "Payment Detail",
        "description": "Order Payment",
        "order_id": "@ViewBag.orderId",
        "prefill": {
            "name": "@Model.Name",
            "email": "@Model.Email",
            "contact": "@Model.Mobile"
        },
        "handler": function (response) {
            document.getElementById("razorpay_payment_id").value = response.razorpay_payment_id;
            document.getElementById("razorpay_order_id").value = response.razorpay_order_id;
            document.getElementById("razorpay_signature").value = response.razorpay_signature;
            document.razorpayForm.submit();
        }
    };

    var rzp1 = new Razorpay(options);
    document.getElementById('rzp-button1').onclick = function (e) {
        rzp1.open();
        e.preventDefault();
    }
</script>
